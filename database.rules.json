{
    "rules": {
        "threads": {
            ".read": true,
            ".write": "auth != null",
            ".indexOn": [
                "timestamp"
            ]
        },
        "conversations": {
            ".read": "auth != null",
            "$conversationId": {
                ".write": "auth != null && $conversationId.contains(auth.uid)",
                "messages": {
                    ".indexOn": [
                        "timestamp"
                    ]
                }
            }
        },
        "rooms": {
            ".read": "auth != null",
            "$roomId": {
                ".write": "auth != null",
                "participants": {
                    "$uid": {
                        ".write": "auth != null && auth.uid === $uid"
                    }
                },
                "signals": {
                    "$signalId": {
                        ".write": "auth != null && newData.child('from').val() === auth.uid"
                    }
                }
            }
        },
        "users": {
            ".read": true,
            "$uid": {
                ".write": "auth != null && auth.uid === $uid"
            }
        },
        "siteStats": {
            ".read": true,
            ".write": true
        },
        "highlights": {
            ".read": true,
            "$threadId": {
                ".write": "auth != null",
                "main": {
                    "$highlightId": {
                        ".indexOn": [
                            "timestamp"
                        ]
                    }
                },
                "replies": {
                    "$replyId": {
                        "$highlightId": {
                            ".indexOn": [
                                "timestamp"
                            ]
                        }
                    }
                }
            }
        }
    }
}
