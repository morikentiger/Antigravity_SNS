# Antigravity
## Voice Room × YUi Audio I/O 仕様書（MVP）
（STT + TTS 統合）

---

## 1. 目的

音声ルームにおいて、
**YUi（ユーザー専用AIナビ）が人間の会話を邪魔せずに
「聞き」「一言だけ話す」ための最小構成の音声I/O設計**を定義する。

本仕様は以下を満たすことを目的とする。

- 人間の会話を最優先する
- AIが主導権を取らない
- 音声データを保存しない
- 低レイテンシで自然な同席感を実現する

---

## 2. 基本思想（最重要）

- STT = 耳（察知するため）
- TTS = 口（一言だけ話すため）
- 記録しない、溜めない、育てない
- 使ったら忘れる

YUiは
**聞く → 助ける → 黙る**
このリズムのみを許可される。

---

## 3. 採用方式（MVP）

### STT（音声 → テキスト）
- **ブラウザSTT（Web Speech API / SpeechRecognition）**

### TTS（テキスト → 音声）
- **ブラウザTTS（Web Speech API / SpeechSynthesis）**

### 採用理由
- 低レイテンシ
- サーバーに音声を送らない設計が可能
- 保存ゼロを自然に担保できる
- 実装・差し替えが容易

---

## 4. STT仕様（聞く）

### 4.1 利用目的（限定）

STTの利用目的は **以下の2点のみ** とする。

1. **人間の発話開始検知**
2. **YUi発話直前の最小文脈取得**

全文文字起こし、議事録化、履歴解析は行わない。

---

### 4.2 発話検知

- 音声入力から「人が話し始めた」ことを検知
- 検知方法：
  - STTイベント
  - または音量しきい値検知
- 精度より**即時性を優先**

#### 検知時の挙動
- YUiのTTSを即停止
- YUi状態をリセット
- 再開は行わない

---

### 4.3 文脈取得（最小）

- 対象：
  - 直前の1文
  - または直前1〜2秒分の発話断片
- 用途：
  - YUiの「要約 / 感情 / 応援」候補生成

#### データ扱い
- メモリ上のみ
- 生成完了後、即破棄
- DB保存・ログ保存なし

---

## 5. TTS仕様（話す）

### 5.1 発話内容

YUiは以下3種類のうち、**1つのみ**発話する。

1. 要約（内容整理）
2. 感情（気持ちの言語化）
3. 応援（前向きな一言）

---

### 5.2 発話ルール

- 1文のみ
- 最大5秒
- 自発発話なし
- ユーザー操作があった場合のみ発話

---

### 5.3 発話タイミング

- ユーザーが候補を選択
- **0.2秒ディレイ**
- ディレイ中はキャンセル可能
- その後TTS再生開始

---

### 5.4 即停止ルール（最重要）

以下を検知した瞬間に **即停止** する。

- 他人の発話開始
- ルーム退出
- 明示的キャンセル操作

停止後の再開は行わない。

---

## 6. 声の設計

### 声質
- 常に同一（YUiの同一性を維持）

### トーン（微差のみ）
- 要約：ニュートラル
- 感情：わずかに柔らかい
- 応援：わずかに前向き

※ キャラクター演出・効果音なし
※ 「AI感」を出さないことを最優先

---

## 7. 音声データの扱い

### 保存方針
- 音声データは一切保存しない
- STT結果も保存しない

### 保存される情報
- 「YUiが発話した」というイベント情報のみ

---

## 8. フルフロー（STT + TTS）

1. 人間が音声ルームで会話
2. STTが一時的に動作
3. ユーザーが「🤍 ナビ一言」を押す
4. 直前のSTT断片を取得
5. 3候補（要約 / 感情 / 応援）を生成
6. ユーザーが1つ選択
7. 0.2秒ディレイ
8. TTSで一言発話
9. 音声・テキストデータ即破棄

---

## 9. 実装しないこと（MVP範囲外）

- 音声ログ保存
- 自動発話
- 割り込み発話
- 長文発話
- 声の個別カスタマイズ
- 学習・人格反映
- サーバーSTT / TTS

---

## 10. 成功条件（体感）

以下が成立すれば成功とする。

> YUiが喋ったことより
> 会話が自然に続いたことが印象に残る

音声I/Oの存在を
**意識されないこと**を最優先とする。

---

## 11. Notes

音声を記録すると「監視」になる。
音声を流すだけなら「同席」になる。

Antigravityは後者を選ぶ。
